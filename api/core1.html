<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Indigo Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Segoe UI', sans-serif; }
    h1, h2, h3 { font-family: 'Cinzel', serif; }
    img.lazy-load {
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    img.lazy-load.loaded {
      opacity: 1;
    }
    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #ec4899;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="bg-white text-gray-900 relative">
  <!-- Loading Overlay -->
  <div id="loading-overlay" class="fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50">
    <div class="text-center">
      <div class="spinner mx-auto mb-4"></div>
      <p class="text-gray-600 text-sm">Cargando productos...</p>
    </div>
  </div>

  <header class="border-b p-4 flex flex-col sm:flex-row justify-between items-center gap-4 shadow-md">
    <h1 class="text-2xl font-bold">Indigo Store</h1>
    <div class="flex flex-col sm:flex-row items-center justify-between w-full gap-4">
      <div class="flex flex-wrap gap-4 justify-center w-full text-sm text-gray-600">
        <a href="https://www.instagram.com/indig0.store" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
          <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" class="w-5 h-5" alt=""> Instagram
        </a>
        <a href="https://www.tiktok.com/@indig0.store" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
          <img src="https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/tiktok.svg" class="w-5 h-5" alt=""> TikTok
        </a>
        <a href="https://www.whatsapp.com/catalog/584128503608/?app_absent=0" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
          <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="w-5 h-5" alt=""> WhatsApp
        </a>
        <a href="https://maps.app.goo.gl/MQ2BxeCVe8wEMx1B7" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
          <img src="https://upload.wikimedia.org/wikipedia/commons/a/aa/Google_Maps_icon_%282020%29.svg" class="w-5 h-5" alt=""> Dirección
        </a>
      </div>
      <div class="flex items-center w-full sm:w-auto ml-auto px-4 sm:px-0">
        <div class="relative w-full sm:w-64">
          <input id="search" type="text" placeholder="Buscar producto..." class="border border-gray-300 focus:border-pink-400 focus:ring-pink-300 rounded-full px-4 py-1 text-sm shadow-sm transition-all w-full" />
          <div id="search-loading" class="absolute right-3 top-1/2 transform -translate-y-1/2 hidden">
            <div class="w-4 h-4 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"></div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="p-4 max-w-7xl mx-auto">
    <!-- Search Results Info -->
    <div id="search-info" class="mb-4 text-sm text-gray-600 hidden"></div>
    
    <!-- Skeleton Loading -->
    <div id="skeleton-loader" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6">
      <!-- Skeleton cards will be inserted here -->
    </div>

    <section id="product-list" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 hidden"></section>
    <div id="no-results" class="text-center text-gray-500 text-sm mt-6 hidden">No se encontraron productos.</div>
    <div id="pagination" class="flex justify-center items-center gap-2 mt-6 flex-wrap"></div>
  </main>

  <footer class="bg-gray-100 mt-10 py-6 px-4 text-center text-sm text-gray-600">
    <div class="mt-4 flex justify-center gap-6 flex-wrap">
      <a href="https://www.instagram.com/indig0.store" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" class="w-5 h-5" alt=""> Instagram
      </a>
      <a href="https://www.tiktok.com/@indig0.store" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
        <img src="https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/tiktok.svg" class="w-5 h-5" alt=""> TikTok
      </a>
      <a href="https://www.whatsapp.com/catalog/584128503608/?app_absent=0" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="w-5 h-5" alt=""> WhatsApp
      </a>
      <a href="https://maps.app.goo.gl/MQ2BxeCVe8wEMx1B7" target="_blank" class="flex items-center gap-2 hover:text-pink-600 transition">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/aa/Google_Maps_icon_%282020%29.svg" class="w-5 h-5" alt=""> Dirección
      </a>
    </div>
  </footer>

  <button id="scrollTop" class="fixed bottom-6 right-6 bg-blue-500 text-white p-2 rounded-full shadow-lg hover:bg-blue-600 hidden">↑</button>

  <script>
    let products = [];
    let currentPage = 1;
    let currentFilteredProducts = [];
    let searchTimeout;

    const API_URL = "https://script.google.com/macros/s/AKfycbyObJhk1xon7GMeibrHMkbDvRaS-Ipql2Lnhl37Z4XmvIdh_pnyaNt68WfbaMi5_ocHCQ/exec";
    
    function showSkeletonLoader() {
      const skeletonContainer = document.getElementById("skeleton-loader");
      skeletonContainer.innerHTML = "";
      
      // Create 8 skeleton cards
      for (let i = 0; i < 8; i++) {
        const skeletonCard = document.createElement("div");
        skeletonCard.className = "bg-pink-100 border p-3 rounded-xl shadow flex flex-col items-center text-center";
        skeletonCard.innerHTML = `
          <div class="skeleton rounded aspect-[3/4] w-full mb-2 h-48"></div>
          <div class="skeleton h-4 w-3/4 mb-2 rounded"></div>
          <div class="skeleton h-3 w-1/2 mb-1 rounded"></div>
          <div class="skeleton h-3 w-1/2 rounded"></div>
        `;
        skeletonContainer.appendChild(skeletonCard);
      }
      
      skeletonContainer.classList.remove("hidden");
    }

    function hideSkeletonLoader() {
      const skeletonContainer = document.getElementById("skeleton-loader");
      skeletonContainer.classList.add("hidden");
    }

    function showLoadingOverlay() {
      document.getElementById("loading-overlay").classList.remove("hidden");
    }

    function hideLoadingOverlay() {
      document.getElementById("loading-overlay").classList.add("hidden");
    }

    async function loadProducts() {
      try {
        showSkeletonLoader();
        
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
        
        const data = await res.json();
        console.log("API Response:", data); // Debug log
        
        // Handle different possible response structures
        if (Array.isArray(data)) {
          products = data;
        } else if (data.data && Array.isArray(data.data)) {
          products = data.data;
        } else if (data.products && Array.isArray(data.products)) {
          products = data.products;
        } else {
          console.error("Unexpected data structure:", data);
          products = [];
        }
        
        currentFilteredProducts = products;
        
        hideSkeletonLoader();
        hideLoadingOverlay();
        
        const productList = document.getElementById("product-list");
        productList.classList.remove("hidden");
        
        renderProducts(currentFilteredProducts, currentPage);
        
        // Show success message briefly
        showSearchInfo(`${products.length} productos cargados`);
        setTimeout(() => hideSearchInfo(), 3000);
        
      } catch (err) {
        console.error("Failed to load products:", err);
        
        hideSkeletonLoader();
        hideLoadingOverlay();
        
        document.getElementById("no-results").textContent = "Error al cargar productos. Intenta de nuevo.";
        document.getElementById("no-results").classList.remove("hidden");
        
        showSearchInfo("Error al cargar productos");
      }
    }

    function renderProducts(list, page = 1) {
      const itemsPerPage = 20;
      const container = document.getElementById("product-list");
      const noResults = document.getElementById("no-results");
      const pagination = document.getElementById("pagination");

      container.innerHTML = "";
      pagination.innerHTML = "";

      if (list.length === 0) {
        noResults.classList.remove("hidden");
        container.classList.add("hidden");
        return;
      } else {
        noResults.classList.add("hidden");
        container.classList.remove("hidden");
      }

      currentPage = page;
      const validItems = list.filter(p => {
        const itemId = p.ItemID || p.itemID || p.ID || p.id;
        const productName = p.Product || p.product || p.ProductName || p.productName;
        return itemId && productName;
      });
      const totalPages = Math.ceil(validItems.length / itemsPerPage);
      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const currentItems = validItems.slice(start, end);

      currentItems.forEach((p, index) => {
        if (!p.ItemID || !p.Product) return;

        const usd = parseFloat(p.USD || 0).toFixed(2);
        const bs = p.Bs || 'N/A';
        const card = document.createElement("div");
        card.className = "card bg-pink-100 border p-3 rounded-xl shadow flex flex-col items-center text-center hover:shadow-lg transition-all duration-300 fade-in";
        card.style.animationDelay = `${index * 0.1}s`;
        
        card.innerHTML = `
          <img data-src="${p.Image || p.image || ''}" alt="${p.Product || p.product || 'Producto'}" loading="lazy" class="lazy-load rounded aspect-[3/4] object-cover w-full mb-2 cursor-pointer hover:opacity-75 transition-opacity" onclick="openImagePopup('${p.Image || p.image || ''}')" />
          <a href="product-${p.ItemID || p.itemID || p.ID || p.id}.html" class="text-base font-semibold text-blue-600 hover:underline cursor-pointer transition-colors">${p.Product || p.product || 'Producto sin nombre'}</a>
          <p class="text-sm text-gray-700 mt-1">USD: ${usd}</p>
          <p class="text-sm text-gray-700">Bs: ${bs}</p>
        `;
        container.appendChild(card);

        // Lazy load images
        const img = card.querySelector("img.lazy-load");
        if (img.dataset.src) {
          img.onload = () => img.classList.add("loaded");
          img.onerror = () => {
            img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTMwQzExNi41NjkgMTMwIDEzMCAxMTYuNTY5IDEzMCAxMDBDMTMwIDgzLjQzMTUgMTE2LjU2OSA3MCAxMDAgNzBDODMuNDMxNSA3MCA3MCA4My40MzE1IDcwIDEwMEM3MCAxMTYuNTY5IDgzLjQzMTUgMTMwIDEwMCAxMzBaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0xNjAgMTQwSDQwVjE2MEgxNjBWMTQwWiIgZmlsbD0iIzlCOUI5QiIvPgo8L3N2Zz4K';
            img.classList.add("loaded");
          };
          img.src = img.dataset.src;
        }
      });

      // Pagination
      if (totalPages > 1) {
        // Previous button
        if (page > 1) {
          const prevBtn = document.createElement("button");
          prevBtn.textContent = "← Anterior";
          prevBtn.className = "px-3 py-1 border rounded transition text-sm font-medium bg-white text-pink-500 border-pink-300 hover:bg-pink-100";
          prevBtn.addEventListener("click", () => renderProducts(list, page - 1));
          pagination.appendChild(prevBtn);
        }

        // Page numbers
        const startPage = Math.max(1, page - 2);
        const endPage = Math.min(totalPages, page + 2);

        for (let i = startPage; i <= endPage; i++) {
          const btn = document.createElement("button");
          btn.textContent = i;
          btn.className = `
            px-3 py-1 border rounded transition text-sm font-medium
            ${i === page
              ? 'bg-pink-500 text-white border-pink-500'
              : 'bg-white text-pink-500 border-pink-300 hover:bg-pink-100'}
          `;
          btn.addEventListener("click", () => renderProducts(list, i));
          pagination.appendChild(btn);
        }

        // Next button
        if (page < totalPages) {
          const nextBtn = document.createElement("button");
          nextBtn.textContent = "Siguiente →";
          nextBtn.className = "px-3 py-1 border rounded transition text-sm font-medium bg-white text-pink-500 border-pink-300 hover:bg-pink-100";
          nextBtn.addEventListener("click", () => renderProducts(list, page + 1));
          pagination.appendChild(nextBtn);
        }
      }
    }

    function showSearchInfo(message) {
      const searchInfo = document.getElementById("search-info");
      searchInfo.textContent = message;
      searchInfo.classList.remove("hidden");
    }

    function hideSearchInfo() {
      const searchInfo = document.getElementById("search-info");
      searchInfo.classList.add("hidden");
    }

    function showSearchLoading() {
      document.getElementById("search-loading").classList.remove("hidden");
    }

    function hideSearchLoading() {
      document.getElementById("search-loading").classList.add("hidden");
    }

    function setupSearch() {
      const searchInput = document.getElementById("search");
      if (!searchInput) return;
      
      searchInput.addEventListener("input", (e) => {
        clearTimeout(searchTimeout);
        const term = e.target.value.trim();
        
        if (term === "") {
          hideSearchLoading();
          currentFilteredProducts = products;
          renderProducts(currentFilteredProducts, 1);
          hideSearchInfo();
          return;
        }

        showSearchLoading();
        showSearchInfo("Buscando...");
        
        searchTimeout = setTimeout(() => {
          applySearchFilter(term);
        }, 300);
      });
    }

    function applySearchFilter(term) {
      const searchTerm = term.toLowerCase();
      console.log("Searching for:", searchTerm); // Debug log
      console.log("Products to search:", products); // Debug log
      
      const filtered = products.filter(p => {
        if (!p) return false;
        
        // Check all possible property names that might contain searchable text
        const searchableFields = [
          p.Product, p.product, p.ProductName, p.productName,
          p.Category, p.category, p.CategoryName, p.categoryName,
          p.Description, p.description, p.desc,
          p.Brand, p.brand, p.Type, p.type,
          p.Name, p.name, p.Title, p.title
        ];
        
        return searchableFields.some(field => {
          if (field && typeof field === 'string') {
            return field.toLowerCase().includes(searchTerm);
          }
          return false;
        });
      });
      
      console.log("Filtered results:", filtered); // Debug log
      
      currentFilteredProducts = filtered;
      renderProducts(currentFilteredProducts, 1);
      hideSearchLoading();
      
      if (filtered.length === 0) {
        showSearchInfo(`No se encontraron productos para "${term}"`);
      } else {
        showSearchInfo(`${filtered.length} producto(s) encontrado(s) para "${term}"`);
      }
    }

    function openProductDetail(itemId) {
      const product = products.find(p => p.ItemID === itemId);
      if (!product) return;

      const existing = document.getElementById('product-detail-popup');
      if (existing) existing.remove();

      const overlay = document.createElement('div');
      overlay.id = 'product-detail-popup';
      overlay.className = 'fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4';
      overlay.addEventListener('click', e => { 
        if (e.target === overlay) overlay.remove(); 
      });

      const usd = parseFloat(product.USD || 0).toFixed(2);
      const bs = product.Bs || 'N/A';
      const availability = product.Availability || 'Disponible';
      const category = product.Category || 'Sin categoría';
      const description = product.Description || 'Sin descripción disponible';

      const content = document.createElement('div');
      content.className = 'bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto relative';
      
      content.innerHTML = `
        <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl font-bold z-10" onclick="document.getElementById('product-detail-popup').remove()">×</button>
        
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <img src="${product.Image || ''}" alt="${product.Product}" class="w-full rounded-lg shadow-md object-cover aspect-[4/5]" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTMwQzExNi41NjkgMTMwIDEzMCAxMTYuNTY5IDEzMCAxMDBDMTMwIDgzLjQzMTUgMTE2LjU2OSA3MCAxMDAgNzBDODMuNDMxNSA3MCA3MCA4My40MzE1IDcwIDEwMEM3MCAxMTYuNTY5IDgzLjQzMTUgMTMwIDEwMCAxMzBaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0xNjAgMTQwSDQwVjE2MEgxNjBWMTQwWiIgZmlsbD0iIzlCOUI5QiIvPgo8L3N2Zz4K'" />
          </div>
          
          <div class="space-y-4">
            <h2 class="text-2xl font-bold text-gray-800">${product.Product}</h2>
            
            <div class="space-y-2">
              <div class="flex justify-between items-center">
                <span class="text-lg font-semibold text-pink-600">USD:</span>
                <span class="text-2xl font-bold text-pink-600">$${usd}</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-lg font-semibold text-green-600">Bs:</span>
                <span class="text-2xl font-bold text-green-600">${bs}</span>
              </div>
            </div>
            
            <div class="border-t pt-4">
              <p class="text-sm text-gray-600 mb-2"><strong>Categoría:</strong> ${category}</p>
              <p class="text-sm text-gray-600 mb-2"><strong>Disponibilidad:</strong> 
                <span class="inline-block px-2 py-1 text-xs rounded-full ${availability.toLowerCase().includes('disponible') ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${availability}</span>
              </p>
              <p class="text-sm text-gray-600 mb-2"><strong>ID:</strong> ${product.ItemID}</p>
            </div>
            
            <div class="border-t pt-4">
              <h3 class="font-semibold text-gray-800 mb-2">Descripción:</h3>
              <p class="text-gray-700 text-sm leading-relaxed">${description}</p>
            </div>
            
            <div class="flex gap-3 mt-6">
              <a href="https://www.whatsapp.com/catalog/584128503608/?app_absent=0" target="_blank" class="flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition text-center text-sm font-medium">
                💬 Consultar por WhatsApp
              </a>
              <a href="https://www.instagram.com/indig0.store" target="_blank" class="flex-1 bg-pink-500 text-white py-2 px-4 rounded-lg hover:bg-pink-600 transition text-center text-sm font-medium">
                📱 Ver en Instagram
              </a>
            </div>
          </div>
        </div>
      `;

      overlay.appendChild(content);
      document.body.appendChild(overlay);
    }

    function openImagePopup(imgUrl) {
      if (!imgUrl) return;
      
      const existing = document.getElementById('image-popup');
      if (existing) existing.remove();
      
      const overlay = document.createElement('div');
      overlay.id = 'image-popup';
      overlay.className = 'fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4';
      overlay.addEventListener('click', e => { 
        if (e.target === overlay) overlay.remove(); 
      });

      const content = document.createElement('div');
      content.className = 'relative max-w-4xl max-h-[90vh]';
      
      const closeBtn = document.createElement('button');
      closeBtn.innerHTML = '×';
      closeBtn.className = 'absolute top-2 right-2 text-white text-3xl font-bold hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full w-10 h-10 flex items-center justify-center';
      closeBtn.addEventListener('click', () => overlay.remove());
      
      const img = document.createElement('img');
      img.src = imgUrl;
      img.className = 'max-w-full max-h-[80vh] rounded-lg shadow-lg object-contain';
      img.onerror = () => {
        img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTMwQzExNi41NjkgMTMwIDEzMCAxMTYuNTY5IDEzMCAxMDBDMTMwIDgzLjQzMTUgMTE2LjU2OSA3MCAxMDAgNzBDODMuNDMxNSA3MCA3MCA4My40MzE1IDcwIDEwMEM3MCAxMTYuNTY5IDgzLjQzMTUgMTMwIDEwMCAxMzBaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0xNjAgMTQwSDQwVjE2MEgxNjBWMTQwWiIgZmlsbD0iIzlCOUI5QiIvPgo8L3N2Zz4K';
      };
      
      content.appendChild(closeBtn);
      content.appendChild(img);
      overlay.appendChild(content);
      document.body.appendChild(overlay);
    }

    // Scroll to top functionality
    window.addEventListener("scroll", () => {
      const btn = document.getElementById("scrollTop");
      if (window.scrollY > 300) {
        btn.classList.remove("hidden");
      } else {
        btn.classList.add("hidden");
      }
    });

    document.getElementById("scrollTop").addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // Initialize everything
    window.addEventListener("DOMContentLoaded", () => {
      loadProducts();
      setupSearch();
      
      // Auto-refresh every 5 minutes
      setInterval(loadProducts, 300000);
    });

    // Handle escape key for closing popups
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const imagePopup = document.getElementById('image-popup');
        const productPopup = document.getElementById('product-detail-popup');
        
        if (imagePopup) imagePopup.remove();
        if (productPopup) productPopup.remove();
      }
    });
  </script>
</body>
</html>